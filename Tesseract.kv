#:import FadeTransition kivy.uix.screenmanager.FadeTransition

<ButImage@ButtonBehavior+AsyncImage>:

<Image>:
    size_hint_x: 0.4
    allow_stretch: True    

<Button>:
    background_color: 0.5,0.5,0.5,1
    bold: True

<Separator@Widget>:
    canvas:
        Color:
            rgba: 0.2, 0.2, 0., 0.5
        Rectangle:
            pos: self.pos
            size: self.size

<HSeparator@Separator>:
    size_hint_y: None
    height: dp(2)

<VSeparator@Separator>:
    size_hint_x: None
    width: dp(2)

ScreenManagement:
    transition: FadeTransition()
    MainScreen:
    ImageDomainScreen:
    PCTDomainScreen:
    NewImageDomainScreen:

<MainScreen>:
    name: 'main'
    GridLayout:
        cols: 2
        rows: 1
        size: root.width, root.height
        spacing: 10
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: None
            width:170
            Button:
                text: 'Select File'
                id: button1
                background_color: 1,1,1,1
                on_release: app.selectFileButtonClick()

            Button:
                text: 'Original Image'
                id: button2
                on_release: app.originalImageButtonClick()

            Button:
                text: 'Principal Components'
                id: button3
                on_release: app.principalComponentsButtonClick()

            Button:
                text: 'Recreated Image'
                id: button4
                on_release: app.recreatedImageButtonClick()
        BoxLayout:
            orientation: 'vertical'
            GridLayout:
                rows: 2
                cols: 1
                size: root.width, root.height
                AnchorLayout:
                    anchor_x: 'center'
                    anchor_y: 'center'
                    Image:
                        source: './templateImages/tesseract_des.png'
                HSeparator:
            FileChooserListView:
                id: filechooser
                on_selection: app.setPath(self.selection and self.selection[0] or '')
            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'center'
                ButImage:
                    id: but
                    size_hint: .5, .5
                    opacity: 1 if self.state == 'normal' else .5
                    allow_stretch: False
                    keep_ratio: False                        
                    source: './templateImages/magicCircle.png'
                    on_release: app.processImage()
  
<ImageDomainScreen>:
    name: 'imagedomain'
    GridLayout:
        cols: 2
        rows: 1
        size: root.width, root.height
        spacing: 10
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: None
            width:170
            Button:
                text: 'Select File'
                id: button1
                on_release: app.selectFileButtonClick()

            Button:
                text: 'Original Image'
                id: button2
                background_color: 1,1,1,1
                on_release: app.originalImageButtonClick()

            Button:
                text: 'Principal Components'
                id: button3
                on_release: app.principalComponentsButtonClick()

            Button:
                text: 'Recreated Image'
                id: button4
                on_release: app.recreatedImageButtonClick()

        BoxLayout:
            orientation: 'vertical'
            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'center'
                Image:
                    id: originalimagefull
                    nocache: True
                    source: 'templateImages/mm.png'
            BoxLayout:
                spacing: 10
                orientation: 'horizontal'
                Image:
                    id: originalimageband0
                    nocache: True 
                    source: 'templateImages/mm.png'
                Image:
                    id: originalimageband1
                    nocache: True
                    source: 'templateImages/mm.png' 
                Image:
                    id: originalimageband2
                    nocache: True
                    source: 'templateImages/mm.png'
                Image:
                    id: originalimageband3
                    nocache: True
                    source: 'templateImages/mm.png'                        
<PCTDomainScreen>:
    name: 'pctdomain'
    GridLayout:
        cols: 2
        rows: 1
        size: root.width, root.height
        spacing: 10
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: None
            width:170
            Button:
                text: 'Select File'
                id: button1
                on_release: app.selectFileButtonClick()

            Button:
                text: 'Original Image'
                id: button2
                on_release: app.originalImageButtonClick()

            Button:
                text: 'Principal Components'
                id: button3
                background_color: 1,1,1,1
                on_release: app.principalComponentsButtonClick()

            Button:
                text: 'Recreated Image'
                id: button4
                on_release: app.recreatedImageButtonClick()
        GridLayout:
            rows: 2
            cols: 2
            spacing: 10
            Image:
                source: 'templateImages/mm.png'
                id: pc0
                nocache: True              
            Image:
                source: 'templateImages/mm.png'
                id: pc1
                nocache: True              
            Image:
                source: 'templateImages/mm.png'
                id: pc2
                nocache: True              
            Image:
                source: 'templateImages/mm.png'
                id: pc3
                nocache: True              

<NewImageDomainScreen>:
    name: 'newimagedomain'
    GridLayout:
        cols: 2
        rows: 1
        size: root.width, root.height
        spacing: 10
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: None
            width:170
            Button:
                text: 'Select File'
                id: button1
                on_release: app.selectFileButtonClick()

            Button:
                text: 'Original Image'
                id: button2
                on_release: app.originalImageButtonClick()

            Button:
                text: 'Principal Components'
                id: button3
                on_release: app.principalComponentsButtonClick()

            Button:
                text: 'Recreated Image'
                id: button4
                background_color: 1,1,1,1
                on_release: app.recreatedImageButtonClick()

        BoxLayout:
            orientation: 'vertical'
            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'center'
                Image:
                    source: 'templateImages/mm.png'
                    id: pctimagefull
                    nocache: True              
            BoxLayout:
                spacing: 10
                orientation: 'horizontal'
                Image:
                    source: 'templateImages/mm.png'
                    id: ipc0
                    nocache: True              
                Image:
                    source: 'templateImages/mm.png'
                    id: ipc1
                    nocache: True              
                Image:
                    source: 'templateImages/mm.png'
                    id: ipc2
                    nocache: True              
                Image:
                    source: 'templateImages/mm.png'
                    id: ipc3
                    nocache: True              

